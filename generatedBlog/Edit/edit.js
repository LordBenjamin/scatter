var textLoaded=false;function saveLink(){saveText();var c=document.getElementById("wmd-input").value;var a=new Blob([c],{type:"text/plain"});var b=document.getElementById("link");b.href=window.webkitURL.createObjectURL(a);b.download=document.getElementById("filename").value}function saveText(){if(textLoaded==false){return}var a=document.getElementById("wmd-input").value;localStorage["edit content"]=a;console.log("Saved to localstorage")}function loadFile(a){var b=a.target.files[0];document.getElementById("filename").value=b.name;var c=new FileReader();c.onload=function(d){var e=d.target.result;document.getElementById("wmd-input").value=e;editor.refreshPreview();saveText()};c.readAsText(b,"UTF-8");document.getElementById("file").value=null}function saveFilename(){localStorage["edit filename"]=document.getElementById("filename").value}function removeMetaHeader(c){var b=c.split("\n");for(var a=0;a<b.length;a++){if(b[a].trim()==""){b.splice(0,a+1);break}}return b.join("\n")}var editor;window.onload=function(){document.getElementById("file").addEventListener("change",loadFile);document.getElementById("filename").value=localStorage["edit filename"];document.getElementById("filename").addEventListener("change",saveFilename);document.getElementById("link").addEventListener("mouseover",saveLink);var b=localStorage["edit content"];if(b==""||b==undefined){b="Date: \nAuthor: \nTitle: \n#LinkTitle: \n#LinkUrl: \n#Index: \n\n# Hello World\n\nthis is"}document.getElementById("wmd-input").value=b;textLoaded=true;document.getElementById("wmd-input").addEventListener("input",saveText);document.getElementById("wmd-input").addEventListener("change",saveText);var a=new Markdown.Converter();a.hooks.chain("preConversion",removeMetaHeader);editor=new Markdown.Editor(a);editor.run()};