var Markdown;if(typeof exports==="object"&&typeof require==="function"){Markdown=exports}else{Markdown={}}(function(){function b(e){return e}function c(e){return false}function a(){}a.prototype={chain:function(f,e){var g=this[f];if(!g){throw new Error("unknown hook "+f)}if(g===b){this[f]=e}else{this[f]=function(i){var h=Array.prototype.slice.call(arguments,0);h[0]=g.apply(null,h);return e.apply(null,h)}}},set:function(f,e){if(!this[f]){throw new Error("unknown hook "+f)}this[f]=e},addNoop:function(e){this[e]=b},addFalse:function(e){this[e]=c}};Markdown.HookCollection=a;function d(){}d.prototype={set:function(e,f){this["s_"+e]=f},get:function(e){return this["s_"+e]}};Markdown.Converter=function(){var S=this.hooks=new a();S.addNoop("plainLinkText");S.addNoop("preConversion");S.addNoop("postNormalization");S.addNoop("preBlockGamut");S.addNoop("postBlockGamut");S.addNoop("preSpanGamut");S.addNoop("postSpanGamut");S.addNoop("postConversion");var O;var N;var L;var M;this.makeHtml=function(V){if(O){throw new Error("Recursive call to converter.makeHtml")}O=new d();N=new d();L=[];M=0;V=S.preConversion(V);V=V.replace(/~/g,"~T");V=V.replace(/\$/g,"~D");V=V.replace(/\r\n/g,"\n");V=V.replace(/\r/g,"\n");V="\n\n"+V+"\n\n";V=e(V);V=V.replace(/^[ \t]+$/mg,"");V=S.postNormalization(V);V=t(V);V=A(V);V=y(V);V=B(V);V=V.replace(/~D/g,"$$");V=V.replace(/~T/g,"~");V=S.postConversion(V);L=N=O=null;return V};function A(V){V=V.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(ab,W,X,Y,Z,aa){W=W.toLowerCase();O.set(W,o(X));if(Z){return Y}else{if(aa){N.set(W,aa.replace(/"/g,"&quot;"))}}return""});return V}function t(X){var V="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var W="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";X=X.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,R);X=X.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,R);X=X.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,R);X=X.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,R);X=X.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,R);return X}function R(X,W){var V=W;V=V.replace(/^\n+/,"");V=V.replace(/\n+$/g,"");V="\n\n~K"+(L.push(V)-1)+"K\n\n";return V}var E=function(V){return y(V)};function y(X,V){X=S.preBlockGamut(X,E);X=k(X);var W="<hr />\n";X=X.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,W);X=X.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,W);X=X.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,W);X=n(X);X=i(X);X=h(X);X=S.postBlockGamut(X,E);X=t(X);X=s(X,V);return X}function z(V){V=S.preSpanGamut(V);V=j(V);V=r(V);V=p(V);V=l(V);V=f(V);V=g(V);V=V.replace(/~P/g,"://");V=o(V);V=m(V);V=V.replace(/  +\n/g," <br>\n");V=S.postSpanGamut(V);return V}function r(W){var V=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;W=W.replace(V,function(Y){var X=Y.replace(/(.)<\/?code>(?=.)/g,"$1`");X=J(X,Y.charAt(1)=="!"?"\\`*_/":"\\`*_");return X});return W}function f(V){V=V.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T);V=V.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T);V=V.replace(/(\[([^\[\]]+)\])()()()()()/g,T);return V}function T(ai,X,Y,Z,aa,ab,ac,ad){if(ad==undefined){ad=""}var ah=X;var W=Y.replace(/:\/\//g,"~P");var V=Z.toLowerCase();var ag=aa;var af=ad;if(ag==""){if(V==""){V=W.toLowerCase().replace(/ ?\n/g," ")}ag="#"+V;if(O.get(V)!=undefined){ag=O.get(V);if(N.get(V)!=undefined){af=N.get(V)}}else{if(ah.search(/\(\s*\)$/m)>-1){ag=""}else{return ah}}}ag=H(ag);ag=J(ag,"*_");var ae='<a href="'+ag+'"';if(af!=""){af=C(af);af=J(af,"*_");ae+=' title="'+af+'"'}ae+=">"+W+"</a>";return ae}function l(V){V=V.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,U);V=V.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,U);return V}function C(V){return V.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function U(ai,X,Y,Z,aa,ab,ac,ad){var ah=X;var V=Y;var W=Z.toLowerCase();var ag=aa;var af=ad;if(!af){af=""}if(ag==""){if(W==""){W=V.toLowerCase().replace(/ ?\n/g," ")}ag="#"+W;if(O.get(W)!=undefined){ag=O.get(W);if(N.get(W)!=undefined){af=N.get(W)}}else{return ah}}V=J(C(V),"*_[]()");ag=J(ag,"*_");var ae='<img src="'+ag+'" alt="'+V+'"';af=C(af);af=J(af,"*_");ae+=' title="'+af+'"';ae+=" />";return ae}function k(V){V=V.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(X,W){return"<h1>"+z(W)+"</h1>\n\n"});V=V.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(X,W){return"<h2>"+z(W)+"</h2>\n\n"});V=V.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(Z,X,Y){var W=X.length;return"<h"+W+">"+z(Y)+"</h"+W+">\n\n"});return V}function n(W,V){W+="~0";var X=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(M){W=W.replace(X,function(ad,aa,ab){var Y=aa;var Z=(ab.search(/[*+-]/g)>-1)?"ul":"ol";var ac=x(Y,Z,V);ac=ac.replace(/\s+$/,"");ac="<"+Z+">"+ac+"</"+Z+">\n";return ac})}else{X=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;W=W.replace(X,function(af,aa,ab,ac){var ae=aa;var Y=ab;var Z=(ac.search(/[*+-]/g)>-1)?"ul":"ol";var ad=x(Y,Z);ad=ae+"<"+Z+">\n"+ad+"</"+Z+">\n";return ad})}W=W.replace(/~0/,"");return W}var u={ol:"\\d+[.]",ul:"[*+-]"};function x(X,Y,V){M++;X=X.replace(/\n{2,}$/,"\n");X+="~0";var Z=u[Y];var aa=new RegExp("(^[ \\t]*)("+Z+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+Z+")[ \\t]+))","gm");var W=false;X=X.replace(aa,function(ai,af,ag,ah){var ad=ah;var ae=af;var ac=/\n\n$/.test(ad);var ab=ac||ad.search(/\n{2,}/)>-1;if(ab||W){ad=y(v(ad),true)}else{ad=n(v(ad),true);ad=ad.replace(/\n$/,"");if(!V){ad=z(ad)}}W=ac;return"<li>"+ad+"</li>\n"});X=X.replace(/~0/g,"");M--;return X}function i(V){V+="~0";V=V.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(aa,X,Y){var W=X;var Z=Y;W=q(v(W));W=e(W);W=W.replace(/^\n+/g,"");W=W.replace(/\n+$/g,"");W="<pre><code>"+W+"\n</code></pre>";return"\n\n"+W+"\n\n"+Z});V=V.replace(/~0/,"");return V}function Q(V){V=V.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(L.push(V)-1)+"K\n\n"}function j(V){V=V.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(ab,X,Y,Z,aa){var W=Z;W=W.replace(/^([ \t]*)/g,"");W=W.replace(/[ \t]*$/g,"");W=q(W);W=W.replace(/:\/\//g,"~P");return X+"<code>"+W+"</code>"});return V}function q(V){V=V.replace(/&/g,"&amp;");V=V.replace(/</g,"&lt;");V=V.replace(/>/g,"&gt;");V=J(V,"*_{}[]\\",false);return V}function m(V){V=V.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");V=V.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return V}function h(V){V=V.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(Y,X){var W=X;W=W.replace(/^[ \t]*>[ \t]?/gm,"~0");W=W.replace(/~0/g,"");W=W.replace(/^[ \t]+$/gm,"");W=y(W);W=W.replace(/(^|\n)/g,"$1  ");W=W.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(ab,Z){var aa=Z;aa=aa.replace(/^  /mg,"~0");aa=aa.replace(/~0/g,"");return aa});return Q("<blockquote>\n"+W+"\n</blockquote>")});return V}function s(ad,V){ad=ad.replace(/^\n+/g,"");ad=ad.replace(/\n+$/g,"");var Y=ad.split(/\n{2,}/g);var Z=[];var ab=/~K(\d+)K/;var W=Y.length;for(var aa=0;aa<W;aa++){var ac=Y[aa];if(ab.test(ac)){Z.push(ac)}else{if(/\S/.test(ac)){ac=z(ac);ac=ac.replace(/^([ \t]*)/g,"<p>");ac+="</p>";Z.push(ac)}}}if(!V){W=Z.length;for(var aa=0;aa<W;aa++){var X=true;while(X){X=false;Z[aa]=Z[aa].replace(/~K(\d+)K/g,function(af,ae){X=true;return L[ae]})}}}return Z.join("\n\n")}function o(V){V=V.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");V=V.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;");return V}function p(V){V=V.replace(/\\(\\)/g,K);V=V.replace(/\\([`*_{}\[\]()>#+-.!])/g,K);return V}var G="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",F="[-A-Z0-9+&@#/%=~_|[\\])]",D=new RegExp('(="|<)?\\b(https?|ftp)(://'+G+"*"+F+")(?=$|\\W)","gi"),I=new RegExp(F,"i");function P(ae,Z,ab,Y){if(Z){return ae}if(Y.charAt(Y.length-1)!==")"){return"<"+ab+Y+">"}var aa=Y.match(/[()]/g);var X=0;for(var V=0;V<aa.length;V++){if(aa[V]==="("){if(X<=0){X=1}else{X++}}else{X--}}var ad="";if(X<0){var ac=new RegExp("\\){1,"+(-X)+"}$");Y=Y.replace(ac,function(af){ad=af;return""})}if(ad){var W=Y.charAt(Y.length-1);if(!I.test(W)){ad=W+ad;Y=Y.substr(0,Y.length-1)}}return"<"+ab+Y+">"+ad}function g(W){W=W.replace(D,P);var V=function(Y,X){return'<a href="'+X+'">'+S.plainLinkText(X)+"</a>"};W=W.replace(/<((https?|ftp):[^'">\s]+)>/gi,V);return W}function B(V){V=V.replace(/~E(\d+)E/g,function(Y,X){var W=parseInt(X);return String.fromCharCode(W)});return V}function v(V){V=V.replace(/^(\t|[ ]{1,4})/gm,"~0");V=V.replace(/~0/g,"");return V}function e(X){if(!/\t/.test(X)){return X}var W=["    ","   ","  "," "],V=0,Y;return X.replace(/[\n\t]/g,function(Z,aa){if(Z==="\n"){V=aa+1;return Z}Y=(aa-V)%4;V=aa+1;return W[Y]})}var w=/(?:["'*()[\]:]|~D)/g;function H(W){if(!W){return""}var V=W.length;return W.replace(w,function(X,Y){if(X=="~D"){return"%24"}if(X==":"){if(Y==V-1||/[0-9\/]/.test(W.charAt(Y+1))){return":"}}return"%"+X.charCodeAt(0).toString(16)})}function J(Z,W,V){var Y="(["+W.replace(/([\[\]\\])/g,"\\$1")+"])";if(V){Y="\\\\"+Y}var X=new RegExp(Y,"g");Z=Z.replace(X,K);return Z}function K(X,W){var V=W.charCodeAt(0);return"~E"+V+"E"}}})();