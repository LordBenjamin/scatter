var http=require("http"),url=require("url"),querystring=require("querystring"),Converter=require("../../Markdown.Converter").Converter,getSanitizingConverter=require("../../Markdown.Sanitizer").getSanitizingConverter,conv=new Converter(),saneConv=getSanitizingConverter();http.createServer(function(c,d){var e=url.parse(c.url);if(e.pathname!=="/"){d.writeHead(404);d.end("Page not found");return}var b=querystring.parse(e.query);d.writeHead(200,{"Content-type":"text/html"});d.write("<html><body>");var a=b.md||"## Hello!\n\n<marquee>I'm walking</marquee>\n\nVisit [Stack Overflow](http://stackoverflow.com)\n\n<b><i>This is never closed!";d.write("<h1>Your output, sanitized:</h1>\n"+saneConv.makeHtml(a));d.write("<h1>Your output, unsanitized:</h1>\n"+conv.makeHtml(a));d.write("<h1>Enter Markdown</h1>\n<form method='get' action='/'><textarea cols=50 rows=10 name='md'>"+a.replace(/</g,"&lt;")+"</textarea><br><input type='submit' value='Convert!'></form>");d.end("</body></html>")}).listen(8000);